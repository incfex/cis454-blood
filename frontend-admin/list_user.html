<!DOCTYPE html>
<html>
    <head>
        <script src = apicaller.js></script>
        <script src = base_url.js></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.css">
    </head>
    <body >
     <h1 align="center">List Users </h1>

    <div class="container">
    <div class="page-header clearfix">
        <div class="btn-toolbar">
            <a href="login.html" class="btn btn-danger pull-right">Logout</a>
            <a href="index.html" class="btn btn-success pull-right">Back To Main Page</a>
        </div>
    </div>

     <table class="table table-bordered table-striped table-hover">
        <thead class="thead-dark/">
          <tr>
            <th>ID</th>
            <th>Username</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>User Type</th>
            <th>Remove</th>
            <th>Edit</th>
          </tr>
        </thead>
        <tbody id = "user_list">
            <div id = errmsg></div>
          
        </tbody>
      </table>

    </body>
    <script>
    document.getElementById('login_button').onclick = function () { 
        var api = new APICaller(base_url);
        api('list', {token:localStorage.token}, function(returned) {
            if(returned.ok == true) {
                var users = returned.user;
                users.forEach(function(user){

                    var tr = document.createElement("tr");
                    var td_id = document.createElement("td");
                    var td_username = document.createElement("td");
                    var td_fname = document.createElement("td");
                    var td_lname = document.createElement("td");
                    var td_type = document.createElement("td");
                    var td_remove = document.createElement("td");
                    var td_edit = document.createElement("td");
                    td_id.innerText = book.title;
                    td_username.innerText = book.author;
                    td_fname.innerText = book.isbn;
                    td_lname.innerText = "$" + (book.price/100);
                    td_type.innerText = book.class_code;
                    td_remove.innerHTML = "<a class="btn btn-success" >Remove</a>"
                    td_edit.innerHTML = "<a href="edit_user.html" class="btn btn-success">Edit</a>"
                    tr.appendChild(td_id);
                    tr.appendChild(td_username);
                    tr.appendChild(td_fname);
                    tr.appendChild(td_lname);
                    tr.appendChild(td_type);
                    tr.appendChild(td_remove);
                    tr.appendChild(td_edit);
                    document.getElementById("user_list").appendChild(tr);

                })
            } else {
                document.getElementById("errmsg").innerText = returned.error;
            }
        });
    }
    </script>
</html>