<!DOCTYPE html>
<html>
    <head>
        <script src = apicaller.js></script>
        <script src = base_url.js></script>
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.css">
    </head>
    <body >
<div class="container">
	<div class="page-header clearfix">
		<h1 class="pull-left">Edit User</h2>
	</div>
        <div class="wrapper">
            <div class="btn-toolbar">
            <a href="login.html" class="btn btn-danger pull-right">Logout</a>
            <a href="list_user.html" class="btn btn-success pull-right">Back To List User Page</a>
            </div>
            <form >
                <div >
                    <label>Username</label>
                    <input  id="username" class="form-control" value="">
                    
                </div>
                <div >
                    <label>Password</label>
                    <input  id="password" class="form-control" value="">
                    
                </div>
                <div >
                    <label>User Type</label>
                    <input  id="user_type" class="form-control" value="">
                    
                </div>
                <div >
                    <label>First Name</label>
                    <input  id="first_name" class="form-control" value="">
                </div>

                <div >
                    <label>Last Name</label>
                    <input  id="last_name" class="form-control" value="">
                </div>


                <br> </br>
                <div class="form-group">
                    <button id="submit" class="btn btn-primary">Submit</button>
                </div>
            </form>
        </div>
    </div>
</div>

  </body>

  <script>
    if(!localStorage.token){
        window.location.href = 'login.html';
    }
    document.getElementById('submit').onclick = function () { 
        var id = Number.parseInt(window.location.hash.replace('#', ''));
        var username = document.getElementById('username');
        var password = document.getElementById('password');
        var first_name = document.getElementById('first_name');
        var last_name = document.getElementById('last_name');
        var user_type = document.getElementById('user_type');
        var api = new APICaller(base_url);
        api('admin/user/edit', {token: localStorage.token, user_id:id, username: username.value, password: password.value, first_name:first_name.value, last_name: last_name.value, user_type: user_type.value }, function(returned) {
            if(returned.ok == true) {
                alert("Successfully edit the user");
                window.location.href = 'list_user.html';
            } else {
                alert(returned.error);
            }
        });
    }
</script>
</html>